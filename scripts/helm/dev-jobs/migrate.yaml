apiVersion: batch/v1
kind: Job
metadata:
  name: ffc-demo-payment-service-migration
spec:
  backoffLimit: 4
  template:
    spec:
      imagePullSecrets:
      - name:
      containers:
      - name: ffc-demo-payment-service-migration
        image: ffc-demo-payment-service
        command: ["npm",  "run", "migrate"]
        imagePullPolicy: IfNotPresent
        env:
          - name: NODE_ENV
            value: development
          - name: POSTGRES_USERNAME
            value: postgres@mine-support2
          - name: POSTGRES_PASSWORD
            value: changeme
          - name: POSTGRES_DB
            value: mine_payments
          - name: POSTGRES_SCHEMA
            value: pr53
          - name: POSTGRES_HOST
            value: ffc-demo-payment-postgres-postgresql
          - name: POSTGRES_PORT
            value: "5432"
      restartPolicy: Never
